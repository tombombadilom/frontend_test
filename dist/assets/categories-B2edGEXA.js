import{e as z,r,j as e,L as f,B as t,a3 as k,a4 as D,a5 as M,a6 as $,a7 as H,a8 as Q,a9 as Z,_ as G}from"./index-A8xx-xxW.js";import{T as J,a as U,b as o,c as l,d as q,e as i}from"./table-CsEzsDcl.js";import{P as N,a as b,b as C,F as K,A as w,c as W}from"./popover-Cv9lAuA-.js";import{C as X,S as A,a as S,b as y,c as T,d as n}from"./select-pnobd5xa.js";import{P as Y}from"./plus-B1589Br_.js";import{T as ee}from"./trash-2-IQX5vnBl.js";import{E as se}from"./ellipsis-DGixAxWM.js";import"./index-DNZbadIk.js";import"./check-De8WsGE6.js";const P=({editMode:m})=>e.jsxs("div",{children:[e.jsxs("p",{children:["Formulaire de catégorie ",m?"en mode édition":"en mode création"]}),e.jsx("p",{children:"Ce composant sera implémenté prochainement."})]});function xe({isNew:m,isEdit:L}){const{id:E}=z(),[x,j]=r.useState(""),[I,O]=r.useState([]),[B,p]=r.useState(!0),[v,h]=r.useState(!1),[F,_]=r.useState(""),[c,u]=r.useState({sortBy:"",isActive:void 0}),[V,g]=r.useState(!1);r.useEffect(()=>{(async()=>{try{p(!0);const a=await G(()=>import("./categories-CQh5MlXl.js"),[]);O(a.default.categories||[])}catch(a){console.error("Erreur lors du chargement des catégories:",a)}finally{p(!1)}})()},[]);const d=[...I.filter(s=>{const a=s.name.toLowerCase().includes(x.toLowerCase())||s.description.toLowerCase().includes(x.toLowerCase()),R=c.isActive===void 0||s.isActive===c.isActive;return a&&R})].sort((s,a)=>{switch(c.sortBy){case"name-asc":return s.name.localeCompare(a.name);case"name-desc":return a.name.localeCompare(s.name);case"order-asc":return s.order-a.order;case"order-desc":return a.order-s.order;default:return s.order-a.order}});return m?e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Créer une nouvelle catégorie"}),e.jsx(P,{})]}):L&&E?e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Modifier la catégorie"}),e.jsx(P,{editMode:!0})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Catégories"}),e.jsxs(f,{to:"/admin/categories/new",className:"rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Ajouter une catégorie"]})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsx("div",{className:"relative flex-1",children:e.jsxs(N,{open:v,onOpenChange:h,children:[e.jsx(b,{asChild:!0,children:e.jsxs(t,{variant:"outline",className:"w-full justify-start",onClick:()=>h(!v),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:F||"Rechercher une catégorie..."}),e.jsx(X,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(C,{className:"w-[300px] p-0",align:"start",children:e.jsxs(D,{className:"bg-command border-command-border",children:[e.jsx(M,{placeholder:"Rechercher une catégorie...",value:x,onValueChange:j,className:"bg-command-input text-command-foreground"}),e.jsxs($,{className:"bg-command",children:[e.jsx(H,{children:"Aucune catégorie trouvée"}),e.jsx(Q,{heading:"Catégories",className:"text-command-foreground",children:d.slice(0,10).map(s=>e.jsx(Z,{value:s.name,onSelect:()=>{j(s.name),_(s.name),h(!1)},className:"bg-command-item hover:bg-command-item-hover data-[selected=true]:bg-command-item-selected data-[selected=true]:text-command-item-selected-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsx("span",{className:`rounded-sm px-1.5 py-0.5 text-xs ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})})]})},s.id))})]})]})})]})}),e.jsxs(N,{open:V,onOpenChange:g,children:[e.jsx(b,{asChild:!0,children:e.jsxs(t,{variant:"outline",className:"w-full md:w-auto",disabled:!0,children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Filtres",Object.values(c).some(s=>s!=="")&&e.jsx("span",{className:"ml-2 rounded-full bg-primary w-2 h-2"})]})}),e.jsx(C,{className:"w-80",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium leading-none",children:"Statut"}),e.jsxs(A,{value:c.isActive===void 0?"":c.isActive.toString(),onValueChange:s=>u(a=>({...a,isActive:s===""?void 0:s==="true"})),children:[e.jsx(S,{className:"bg-command border-command-border",children:e.jsx(y,{placeholder:"Tous les statuts"})}),e.jsxs(T,{className:"bg-command border-command-border",children:[e.jsx(n,{value:"",className:"bg-command-item hover:bg-command-item-hover",children:"Tous les statuts"}),e.jsx(n,{value:"true",className:"bg-command-item hover:bg-command-item-hover data-[selected=true]:bg-command-item-selected data-[selected=true]:text-command-item-selected-foreground",children:"Active"}),e.jsx(n,{value:"false",className:"bg-command-item hover:bg-command-item-hover data-[selected=true]:bg-command-item-selected data-[selected=true]:text-command-item-selected-foreground",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium leading-none",children:"Trier par"}),e.jsxs(A,{value:c.sortBy,onValueChange:s=>u(a=>({...a,sortBy:s})),children:[e.jsx(S,{children:e.jsx(y,{placeholder:"Trier par..."})}),e.jsxs(T,{children:[e.jsx(n,{value:"",children:"Par défaut (Ordre)"}),e.jsx(n,{value:"order-asc",children:"Ordre croissant"}),e.jsx(n,{value:"order-desc",children:"Ordre décroissant"}),e.jsx(n,{value:"name-asc",children:"Nom A-Z"}),e.jsx(n,{value:"name-desc",children:"Nom Z-A"})]})]})]}),e.jsx(t,{variant:"outline",onClick:()=>{u({sortBy:"",isActive:void 0}),g(!1)},children:"Réinitialiser les filtres"})]})})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(J,{children:[e.jsx(U,{children:e.jsxs(o,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-1",children:["Nom",e.jsx(w,{className:"h-4 w-4"})]})}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Jeu"}),e.jsx(l,{children:"Ordre"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-1",children:["Statut",e.jsx(w,{className:"h-4 w-4"})]})}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(q,{children:B?e.jsx(o,{children:e.jsx(i,{colSpan:6,className:"text-center py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})})}):d.length===0?e.jsx(o,{children:e.jsx(i,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"Aucune catégorie trouvée"})}):d.map(s=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsx("span",{className:"font-medium",children:s.name})}),e.jsx(i,{children:s.description}),e.jsx(i,{children:s.gameId}),e.jsx(i,{children:s.order}),e.jsx(i,{children:e.jsx("span",{className:`rounded-sm px-1.5 py-0.5 text-xs ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(t,{variant:"ghost",size:"icon",asChild:!0,children:e.jsxs(f,{to:`/admin/categories/edit/${s.id}`,children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Modifier"})]})}),e.jsxs(t,{variant:"ghost",size:"icon",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Supprimer"})]}),e.jsxs(t,{variant:"ghost",size:"icon",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Plus"})]})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Affichage de ",d.length," catégories"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",disabled:!0,children:"Précédent"}),e.jsx(t,{variant:"outline",size:"sm",children:"Suivant"})]})]})]})}export{xe as default};
