const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/object-filter-sidebar-DwYq8GR_.js","assets/index-A8xx-xxW.js","assets/index-B41Dxm5k.css","assets/catalog-layout-CapVVbF_.js","assets/select-pnobd5xa.js","assets/index-DNZbadIk.js","assets/check-De8WsGE6.js","assets/skeleton-D6u_i3Qj.js","assets/card-DVQQUcVi.js","assets/checkbox-0GfaeNTR.js","assets/slider-WpAHhGps.js","assets/badge-Dcq_zIk8.js","assets/object-display-BqiMHCYF.js","assets/use-objects-Cfbv402g.js","assets/objects-CxMhMVRW.js","assets/toast-Cu_8kZFb.js","assets/motion-BMEn2pEQ.js","assets/pagination-Cxq5DVxe.js","assets/ellipsis-DGixAxWM.js","assets/use-infinite-scroll-DTpYy80u.js"])))=>i.map(i=>d[i]);
var y=Object.defineProperty;var b=(s,r,a)=>r in s?y(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a;var m=(s,r,a)=>b(s,typeof r!="symbol"?r+"":r,a);import{r as l,j as e,B as N,_ as h}from"./index-A8xx-xxW.js";import{u as w}from"./use-objects-Cfbv402g.js";import{u as C}from"./use-categories-DUGgby4t.js";import{C as _}from"./catalog-layout-CapVVbF_.js";import{S as i}from"./skeleton-D6u_i3Qj.js";import{C as v,c as S,d as E,a as k,b as A}from"./card-DVQQUcVi.js";import"./objects-CxMhMVRW.js";import"./games-categories-DBzAI_sh.js";import"./objects-categories-DQIGr8qy.js";import"./packs-categories-C9IA-Fff.js";import"./select-pnobd5xa.js";import"./index-DNZbadIk.js";import"./check-De8WsGE6.js";class D extends l.Component{constructor(){super(...arguments);m(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,c){console.error("Uncaught error:",a,c)}render(){var a;return this.state.hasError?this.props.fallback||e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs(v,{className:"w-full max-w-md",children:[e.jsx(S,{children:e.jsx(E,{className:"text-game-primary",children:"Une erreur est survenue"})}),e.jsx(k,{children:e.jsx("p",{className:"text-muted-foreground",children:((a=this.state.error)==null?void 0:a.message)||"Une erreur inattendue s'est produite."})}),e.jsx(A,{children:e.jsx(N,{onClick:()=>{this.setState({hasError:!1}),window.location.reload()},children:"RÃ©essayer"})})]})}):this.props.children}}const O=l.lazy(()=>h(()=>import("./object-filter-sidebar-DwYq8GR_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(s=>({default:s.ObjectFilterSidebar}))),U=l.lazy(()=>h(()=>import("./object-display-BqiMHCYF.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,13,14,15,16,17,18,19])).then(s=>({default:s.ObjectDisplay}))),R=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{className:"h-6 w-32 mb-4"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:5},(s,r)=>e.jsx(i,{className:"h-8 w-full"},`game-filter-skeleton-${r+1}`))})]}),e.jsxs("div",{children:[e.jsx(i,{className:"h-6 w-24 mb-4"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:4},(s,r)=>e.jsx(i,{className:"h-8 w-full"},`category-filter-skeleton-${r+1}`))})]}),e.jsxs("div",{children:[e.jsx(i,{className:"h-6 w-28 mb-4"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:3},(s,r)=>e.jsx(i,{className:"h-8 w-full"},`rarity-filter-skeleton-${r+1}`))})]}),e.jsxs("div",{children:[e.jsx(i,{className:"h-6 w-28 mb-4"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:3},(s,r)=>e.jsx(i,{className:"h-8 w-full"},`platform-filter-skeleton-${r+1}`))})]})]});function K(){const{objects:s}=w(),{getAllCategories:r}=C("objects"),a=[...new Set(s.map(t=>t.gameId))].map(t=>{var n;return{id:t.toString(),name:((n=r().find(o=>o.id===t))==null?void 0:n.name)||"Unknown Game",count:s.filter(o=>o.gameId===t).length}}).filter(t=>t.count>0),c=r().map(t=>({id:t.id.toString(),name:t.name,count:s.filter(n=>Math.floor(n.category/100)===t.id).length})).filter(t=>t.count>0),u=[...new Set(s.map(t=>t.rarity))].map(t=>({id:t,name:t.charAt(0).toUpperCase()+t.slice(1),count:s.filter(n=>n.rarity===t).length})).filter(t=>t.count>0),p=s.reduce((t,n)=>{for(const o of n.tags){const d=t.find(g=>g.id===o);d?d.count++:t.push({id:o,name:o.charAt(0).toUpperCase()+o.slice(1),count:1})}return t},[]),f={amount:Math.max(...s.map(t=>t.price.amount),100),currency:"EUR"},j=s.filter(t=>(t.price.discount||0)>0).length,x=s.filter(t=>{const n=new Date(t.availability.startDate||""),o=new Date;return o.setMonth(o.getMonth()-1),n>=o}).length;return e.jsx(D,{children:e.jsx(_,{title:"Objets",type:"objects",filterSidebar:e.jsx(l.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(O,{games:a,categories:c,rarities:u,platforms:p,maxPrice:f,discountedCount:j,newReleasesCount:x})}),content:e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((t,n)=>e.jsx(i,{className:"h-[300px] rounded-lg"},`object-grid-skeleton-${n+1}`))}),children:e.jsx(U,{})})})})}export{K as default};
