import{r as f,K as S,M as E,N as F,j as e,m as r,O as j,B as y,L as g}from"./index-A8xx-xxW.js";import{u as L,F as M,a as n,b as c,c as l,d as m,e as v,s as k,o as z,f as T,g as w}from"./form-NQCUH1ql.js";import{C as P}from"./checkbox-0GfaeNTR.js";import{s as d}from"./toast-Cu_8kZFb.js";import{E as q}from"./eye-off-DnHDftsS.js";import{E as A}from"./eye-CQnemKJn.js";import"./index-DNZbadIk.js";import"./check-De8WsGE6.js";const B=z({email:w().min(1,{message:"L'email est requis"}).email({message:"Format d'email invalide"}),password:w().min(6,{message:"Le mot de passe doit contenir au moins 6 caractères"}),rememberMe:T().default(!1).optional()});function H(){var p;const[t,b]=f.useState(!1),{login:N,user:x}=S(),o=E(),i=((p=F().state)==null?void 0:p.from)||"/";f.useEffect(()=>{x&&o(i,{replace:!0})},[x,o,i]);const a=L({resolver:k(B),defaultValues:{email:"",password:"",rememberMe:!1}});async function C(s){try{const u=s.email.trim().toLowerCase(),h=await N(u,s.password);h.success?(d.success("Connexion réussie"),o(i,{replace:!0})):d.error(h.error||"Erreur de connexion")}catch{d.error("Une erreur est survenue")}}return e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"container mx-auto flex min-h-[calc(100vh-4rem)] flex-col items-center justify-center px-4 py-12",children:e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(r.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-3xl font-bold",children:"Connexion"}),e.jsx(r.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-muted-foreground",children:"Entrez vos identifiants pour accéder à votre compte"})]}),e.jsx(M,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(C),className:"space-y-4",children:[e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(l,{children:"Email"}),e.jsx(m,{children:e.jsx(j,{type:"email",placeholder:"exemple@email.com",autoComplete:"email",...s})}),e.jsx(v,{})]})}),e.jsx(n,{control:a.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(l,{children:"Mot de passe"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{type:t?"text":"password",placeholder:"••••••••",autoComplete:"current-password",...s}),e.jsxs(y,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>b(!t),children:[t?e.jsx(q,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:t?"Masquer le mot de passe":"Afficher le mot de passe"})]})]})}),e.jsx(v,{})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{control:a.control,name:"rememberMe",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-2",children:[e.jsx(m,{children:e.jsx(P,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(l,{children:"Se souvenir de moi"})})]})}),e.jsx(g,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Mot de passe oublié ?"})]}),e.jsx(y,{type:"submit",className:"w-full",disabled:a.formState.isSubmitting,children:a.formState.isSubmitting?"Connexion en cours...":"Se connecter"})]})}),e.jsxs("div",{className:"text-center text-sm",children:["Vous n'avez pas de compte ?"," ",e.jsx(g,{to:"/register",className:"text-primary hover:underline",children:"S'inscrire"})]})]})})}export{H as default};
