import{M as C,N as b,K as y,r as F,j as e,O as l,B as N}from"./index-A8xx-xxW.js";import{C as v,c as E,d as L,e as S,a as A}from"./card-DVQQUcVi.js";import{u as I,F as M,a as m,b as d,c as x,d as u,e as p,s as z,z as o}from"./form-NQCUH1ql.js";import{s as n}from"./toast-Cu_8kZFb.js";const B=o.object({email:o.string().email("Email invalide"),password:o.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")});function O(){const j=C(),h=b(),{login:f}=y(),[t,i]=F.useState(!1),r=I({resolver:z(B),defaultValues:{email:"",password:""}}),g=async s=>{var c;try{i(!0);const a=await f(s.email,s.password);if(a.success){const w=((c=h.state)==null?void 0:c.from)||"/admin";j(w,{replace:!0}),n.success("Connexion réussie")}else n.error(a.error||"Erreur de connexion")}catch{n.error("Erreur lors de la connexion")}finally{i(!1)}};return e.jsx("div",{className:"container flex h-screen w-screen flex-col items-center justify-center",children:e.jsxs(v,{className:"w-full max-w-lg",children:[e.jsxs(E,{className:"space-y-1",children:[e.jsx(L,{className:"text-2xl font-bold",children:"Administration"}),e.jsx(S,{children:"Connectez-vous à votre compte administrateur"})]}),e.jsx(A,{children:e.jsx(M,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(g),className:"space-y-4",children:[e.jsx(m,{control:r.control,name:"email",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Email"}),e.jsx(u,{children:e.jsx(l,{type:"email",placeholder:"admin@example.com",...s})}),e.jsx(p,{})]})}),e.jsx(m,{control:r.control,name:"password",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Mot de passe"}),e.jsx(u,{children:e.jsx(l,{type:"password",placeholder:"••••••••",...s})}),e.jsx(p,{})]})}),e.jsx(N,{type:"submit",className:"w-full",disabled:t,children:t?"Connexion...":"Se connecter"})]})})})]})})}export{O as default};
